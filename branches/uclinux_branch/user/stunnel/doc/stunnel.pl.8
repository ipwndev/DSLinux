.\" Automatically generated by Pod::Man v1.3, Pod::Parser v1.13
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R

.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "STUNNEL.PL 8"
.TH STUNNEL.PL 8 "2004.02.06" "4.05" "stunnel"
.UC
.SH "NAZWA"
.IX Header "NAZWA"
stunnel \- uniwersalny tunel protoko³u \s-1SSL\s0
.SH "SK£ADNIA"
.IX Header "SK£ADNIA"
\&\fBstunnel\fR [filename] | \-fd\ [n] | \-help | \-version | \-sockets
.SH "OPIS"
.IX Header "OPIS"
Program \fBstunnel\fR zosta³ zaprojektowany do opakowywania po³±czeñ
pomiêdzy zdalnymi klientami a lokalnymi (startowalnymi przez \fIinetd\fR)
lub zdalnymi serwerami w protokó³ \fI\s-1SSL\s0\fR.  Pozwala to proste zestawinie
komunikacji serwerów nie posiadaj±cych funkcjonalno¶ci \fI\s-1SSL\s0\fR poprzez
bezpieczne kana³y \fI\s-1SSL\s0\fR.
.PP
\&\fBstunnel\fR pozwala dodaæ funkcjonalno¶æ \fI\s-1SSL\s0\fR do powszechnie stosowanych
demonów \fIinetd\fR, np. \fIpop3\fR lub \fIimap\fR, do samodzielnych demonów,
np. \fInntp\fR, \fIsmtp\fR lub \fIhttp\fR, a nawet tunelowaæ ppp poprzez gniazda sieciowe
bez zmian w kodzie ¼ród³owym.
.SH "OPCJE"
.IX Header "OPCJE"
.IP "\fB[plik]\fR" 4
.IX Item "[plik]"
u¿yj podanego pliku konfiguracyjnego
.IP "\fB\-fd [n]\fR (tylko Unix)" 4
.IX Item "-fd [n] (tylko Unix)"
wczytaj konfiguracjê z podanego deskryptora pliku
.IP "\fB\-help\fR" 4
.IX Item "-help"
drukuj listê wspieranych opcji
.IP "\fB\-version\fR" 4
.IX Item "-version"
drukuj wersjê programu i domy¶lne warto¶ci parametrów
.IP "\fB\-sockets\fR" 4
.IX Item "-sockets"
drukuj domy¶lne opcje gniazd
.IP "\fB\-install\fR (tylko \s-1NT/2000/XP\s0)" 4
.IX Item "-install (tylko NT/2000/XP)"
instaluj serwis \s-1NT\s0
.IP "\fB\-uninstall\fR (tylko \s-1NT/2000/XP\s0)" 4
.IX Item "-uninstall (tylko NT/2000/XP)"
odinstaluj serwis \s-1NT\s0
.SH "PLIK KONFIGURACYJNY"
.IX Header "PLIK KONFIGURACYJNY"
Linia w pliku konfiguracyjnym mo¿e byæ:
.IP "\(bu" 4
pusta (ignorowana)
.IP "\(bu" 4
komentarzem rozpoczynaj±cym siê znakiem \*(L"#\*(R" (ignorowana)
.IP "\(bu" 4
par± \*(L"nazwa_opcji = warto¶æ_opcji\*(R"
.IP "\(bu" 4
tekstem \*(L"[nazwa_us³ugi]\*(R" wskazuj±cym pocz±tek definicji us³ugi
.Sh "\s-1OPCJE\s0 \s-1GLOBALNE\s0"
.IX Subsection "OPCJE GLOBALNE"
.IP "\fBCApath\fR = katalog_CA" 4
.IX Item "CApath = katalog_CA"
katalog Centrum Certyfikacji
.Sp
Opcja okre¶la katalog, w którym \fBstunnel\fR bêdzie szuka³ certyfikatów,
je¿eli u¿yta zosta³a opcja \fIverify\fR.  Pliki z certyfikatami musz±
posiadaæ specjalne nazwy \s-1XXXXXXXX\s0.0, gdzie \s-1XXXXXXXX\s0 jest skrótem
certyfikatu.
.IP "\fBCAfile\fR = plik_CA" 4
.IX Item "CAfile = plik_CA"
plik Centrum Certyfikacji
.Sp
Opcja pozwala okre¶liæ po³o¿enie pliku zawieraj±cego certyfikaty u¿ywane
przez opcjê \fIverify\fR.
.IP "\fBcert\fR = plik_pem" 4
.IX Item "cert = plik_pem"
plik z ³añcuchem certyfikatów
.Sp
Opcja okre¶la po³o¿enie pliku zawieraj±cego certyfikaty u¿ywane przez
program \fBstunnel\fR do uwierzytelnienia siê przed drug± stron± po³±czenia.
Certyfikat jest konieczny, aby u¿ywaæ programu w trybie serwera.
W trybie klienta certyfikat jest opcjonalny.
.IP "\fBchroot\fR = katalog (tylko Unix)" 4
.IX Item "chroot = katalog (tylko Unix)"
katalog roboczego korzenia systemu plików
.Sp
Opcja okre¶la katalog, w którym uwiêziony zostanie proces programu
\&\fBstunnel\fR tu¿ po jego inicjalizacji, a przed rozpoczêciem odbierania
po³±czeñ.  ¦cie¿ki podane w opcjach \fICApath\fR, \fIpid\fR oraz \fIexec\fR
musz± byæ umieszczone wewn±trz katalogu podanego w opcji \fIchroot\fR
i okre¶lone wzlêdem tego katalogu.
.Sp
W przypadku wykorzystania kontroli dostêpu przy pomocy biblioteki
libwrap (\s-1TCP\s0 wrappers) jej pliki konfiguracyjne (/etc/hosts.allow i
/etc/hosts.deny) musz± zostaæ skopiowane do podkatalogu etc/
umieszczonego wewn±trz katalogu podanego w opcji \fIchroot\fR.
.IP "\fBciphers\fR = lista_szyfrów" 4
.IX Item "ciphers = lista_szyfrów"
lista dozwolonych szyfrów \s-1SSL\s0
.Sp
Parametrem tej opcji jest lista szyfrów, które bêd± u¿yte przy
otwieraniu nowych po³±czeñ \s-1SSL\s0, np.:  \s-1DES\-CBC3\-SHA:IDEA\-CBC\-MD5\s0
.IP "\fBclient\fR = yes | no" 4
.IX Item "client = yes | no"
tryb kliencki (dalna us³uga u¿ywa \s-1SSL\s0)
.Sp
domy¶lnie: no (tryb serwerowy)
.IP "\fBCRLpath\fR = katalog_CRL" 4
.IX Item "CRLpath = katalog_CRL"
katalog List Odwo³anych Certyfikatów (\s-1CRL\s0)
.Sp
Opcja okre¶la katalog, w którym \fBstunnel\fR bêdzie szuka³ list \s-1CRL\s0,
je¿eli u¿yta zosta³a opcja \fIverify\fR.  Pliki z listami \s-1CRL\s0 musz±
posiadaæ specjalne nazwy \s-1XXXXXXXX\s0.0, gdzie \s-1XXXXXXXX\s0 jest skrótem
listy \s-1CRL\s0.
.IP "\fBCRLfile\fR = plik_CRL" 4
.IX Item "CRLfile = plik_CRL"
plik List Odwo³anych Certyfikatów (\s-1CRL\s0)
.Sp
Opcja pozwala okre¶liæ po³o¿enie pliku zawieraj±cego listy \s-1CRL\s0 u¿ywane
przez opcjê \fIverify\fR.
.IP "\fBdebug\fR = poziom[.podsystem]" 4
.IX Item "debug = poziom[.podsystem]"
szczegó³owo¶æ logowania
.Sp
Poziom logowania mo¿na okre¶liæ przy pomocy jednej z nazw lub liczb:
emerg (0), alert (1), crit (2), err (3), warning (4), notice (5),
info (6) lub debug (7).
Zapisywane s± komunikaty o poziomie ni¿szym (numerycznie) lub równym podanemu.
Do uzyskania najwy¿szego poziomu szczegó³owo¶ci mo¿na u¿yæ opcji
\&\fBdebug = debug\fR lub \fBdebug = 7\fR.  Domy¶lnym poziomem jest notice (5).
.Sp
O ile nie wyspecyfikowano podsystemu u¿yty bêdzie domy¶lny: daemon.
Podsystemy nie s± wspierane przez platformê Win32.
.Sp
Wielko¶æ liter jest ignorowana zarówno dla poziomu jak podsystemu.
.IP "\fB\s-1EGD\s0\fR = ¶cie¿ka_do_EGD (tylko Unix)" 4
.IX Item "EGD = ¶cie¿ka_do_EGD (tylko Unix)"
¶cie¿ka do gniazda programu Entropy Gathering Daemon
.Sp
Opcja pozwala okre¶liæ ¶cie¿kê do gniazda programu Entropy Gathering Daemon
u¿ywanego do zainicjalizowania generatora ci±gów pseudolosowych biblioteki
OpenSSL.  Opcja jest dostêpna z bibliotek± OpenSSL 0.9.5a lub nowsz±.
.IP "\fBforeground\fR = yes | no (tylko Unix)" 4
.IX Item "foreground = yes | no (tylko Unix)"
tryb pierwszoplanowy
.Sp
U¿ycie tej opcji powoduje, ¿e \fIstunnel\fR nie przechodzi w t³o loguj±æ
swoje komunikaty na konsolê zamiast przez \fIsyslog\fR (o ile nie u¿yto
opcji \fIoutput\fR).
.IP "\fBkey\fR = plik_klucza" 4
.IX Item "key = plik_klucza"
klucz prywatny do certyfikatu podanego w opcji \fIcert\fR
.Sp
Klucz prywatny jest potrzebny do uwierzytelnienia w³a¶ciciela certyfikatu.
Poniewa¿ powinien on byæ zachowany w tajemnicy, prawa do jego odczytu
powinien mieæ wy³±cznie w³a¶ciciel pliku.  W systemie Unix mo¿na to osi±gn±æ
komend±:
.Sp
.Vb 1
\&    chmod 600 keyfile
.Ve
domy¶lnie: warto¶æ opcji \fIcert\fR
.IP "\fBoptions\fR = opcje_SSL" 4
.IX Item "options = opcje_SSL"
opcje biblioteki OpenSSL
.Sp
Paremetrem jest nazwa opcji zgodnie z opisem w \fI\fISSL_CTX_set_options\fI\|(3ssl)\fR,
ale bez przedrostka \fI\s-1SSL_OP_\s0\fR.
Aby wyspecyfikowaæ kilka opcji nale¿y u¿yæ \fIoptions\fR wielokrotnie.
.Sp
Na przyk³ad dla zachowania kompatybilno¶ci z b³êdami implementacji \s-1SSL\s0
w programie Eudora mo¿na u¿yæ opcji:
.Sp
.Vb 1
\&    options = DONT_INSERT_EMPTY_FRAGMENTS
.Ve
.IP "\fBoutput\fR = plik" 4
.IX Item "output = plik"
plik, do którego dopisane zostan± logi
.Sp
U¿ycie tej opcji zmienia domy¶lne zachowanie programu polegaj±ce
na logowaniu swoich komunikatów poprzez syslog.
.Sp
Do przekierowania komunikatów na standardowe wyj¶cie (na przyk³ad po to,
¿eby zalogowaæ je programem splogger z pakietu daemontools) mo¿na podaæ
jako parametr urz±dzenie /dev/stdout.
.IP "\fBpid\fR = plik (tylko Unix)" 4
.IX Item "pid = plik (tylko Unix)"
po³o¿enie pliku z numerem procesu
.Sp
Je¿eli argument jest pusty plik nie zostanie stworzony.
.IP "\fBRNDbytes\fR = liczba_bajtów" 4
.IX Item "RNDbytes = liczba_bajtów"
liczba bajtów do zainicjowania generatora pseudolosowego
.Sp
W wersjach biblioteki OpenSSL starszych ni¿ 0.9.5a opcja ta okre¶la
równie¿ liczbê bajtów wystarczaj±cych do zainicjowania \s-1PRNG\s0.
Nowsze wersje biblioteki maj± wbudowan± funkcjê okre¶laj±c±, czy
dostarczona ilo¶æ losowo¶ci jest wystarczaj±ca do zainicjowania generatora.
.IP "\fBRNDfile\fR = plik" 4
.IX Item "RNDfile = plik"
¶cie¿ka do pliku zawieraj±cego losowe dane
.Sp
Biblioteka OpenSSL u¿yje danych z tego pliku do zainicjowania
generatora pseudolosowego.
.IP "\fBRNDoverwrite\fR = yes | no" 4
.IX Item "RNDoverwrite = yes | no"
nadpisz plik nowymi warto¶ciami pseudolosowymi
.Sp
domy¶lnie: yes (nadpisz)
.IP "\fBservice\fR = nazwa_serwisu (tylko \s-1NT/2000/XP\s0)" 4
.IX Item "service = nazwa_serwisu (tylko NT/2000/XP)"
u¿yj parametru jako nazwy serwisu
.Sp
Unix: nazwa serwisu dla biblioteki \s-1TCP\s0 Wrapper w trybie \fIinetd\fR.
.Sp
\&\s-1NT/2000/XP:\s0 nazwa serwisu \s-1NT\s0 w Panelu Sterowania.
.Sp
domy¶lnie: stunnel
.IP "\fBsession\fR = przeterminowanie_pamiêci_podrêcznej_sesji" 4
.IX Item "session = przeterminowanie_pamiêci_podrêcznej_sesji"
czas w sekundach, po którym sesja \s-1SSL\s0 zostanie usuniêta z pamiêci podrêcznej
.IP "\fBsetgid\fR = identyfikator_grupy (tylko Unix)" 4
.IX Item "setgid = identyfikator_grupy (tylko Unix)"
grupa z której prawami pracowa³ bêdzie \fIstunnel\fR
.IP "\fBsetuid\fR = identyfikator_u¿ytkownika (tylko Unix)" 4
.IX Item "setuid = identyfikator_u¿ytkownika (tylko Unix)"
u¿ytkownik, z którego prawami pracowa³ bêdzie \fIstunnel\fR
.IP "\fBsocket\fR = a|l|r:option=value[:value]" 4
.IX Item "socket = a|l|r:option=value[:value]"
ustaw opcjê na akceptuj±cym/lokalnym/zdalnym gnie¼dzie
.Sp
Dla opcji linger warto¶ci maj± postaæ l_onof:l_linger.
Dla opcji time warto¶ci maj± postaæ tv_sec:tv_usec.
.Sp
Przyk³ady:
.Sp
.Vb 16
\&    socket = l:SO_LINGER=1:60
\&        ustaw jednominutowe przeterminowanie
\&        przy zamykaniu lokalnego gniazda
\&    socket = r:TCP_NODELAY=1
\&        wy³±cz algortym Nagle'a na zdalnych
\&        gniazdach
\&    socket = r:SO_OOBINLINE=1
\&        umie¶æ dane pozapasmowe (out-of-band)
\&        bezpo¶rednio w strumieniu danych
\&        wej¶ciowych dla zdalnych gniazd
\&    socket = a:SO_REUSEADDR=0
\&        zablokuj ponowne u¿ywanie portu
\&        (domy¶lnie w³±czone)
\&    socket = a:SO_BINDTODEVICE=lo
\&        przyjmuj po³±czenia wy³±cznie na
\&        interfejsie zwrotnym (ang. loopback)
.Ve
.IP "\fBtaskbar\fR = yes | no (tylko \s-1WIN32\s0)" 4
.IX Item "taskbar = yes | no (tylko WIN32)"
w³±cz ikonkê w prawym dolnym rogu ekranu
.Sp
domy¶lnie: yes (w³±cz)
.IP "\fBverify\fR = poziom" 4
.IX Item "verify = poziom"
weryfikuj certyfikat drugiej strony po³±czenia
.Sp
.Vb 7
\&    poziom 1 - weryfikuj, je¿eli zosta³
\&        przedstawiony
\&    poziom 2 - weryfikuj z zainstalowanym
\&        certyfikatem Centrum Certyfikacji
\&    poziom 3 - weryfikuj z lokalnie
\&        zainstalowanym certyfikatem drugiej strony
\&    domy¶lnie - nie weryfikuj
.Ve
.Sh "\s-1OPCJE\s0 US£UG"
.IX Subsection "OPCJE US£UG"
Ka¿da sekcja konfiguracji us³ugi zaczyna siê jej nazw± ujêt± w nawias
kwadratowy.  Nazwa us³ugi u¿ywana jest do kontroli dostêpu przez
bibliotekê libwrap (\s-1TCP\s0 wrappers) oraz pozwala rozró¿niæ poszczególne
us³ugi w logach.
.PP
Je¿eli \fBstunnel\fR ma zostaæ u¿yty w trybie \fIinetd\fR, gdzie za odebranie
po³±czenia odpowiada osobny program (zwykle \fIinetd\fR, \fIxinetd\fR
lub \fItcpserver\fR), nale¿y przeczytaæ sekcjê \fB\s-1TRYB\s0 \s-1INETD\s0\fR poni¿ej.
.IP "\fBaccept\fR = [adres:]port" 4
.IX Item "accept = [adres:]port"
nas³uchuje na po³±czenia na podanym adresie i porcie
.Sp
Je¿eli nie zosta³ podany adres, \fIstunnel\fR domy¶lnie nas³uchuje
na wszystkich adresach \s-1IP\s0 lokalnych interfejsów.
.IP "\fBconnect\fR = [adres:]port" 4
.IX Item "connect = [adres:]port"
po³±cz siê ze zdalnym serwerem na podany port
.Sp
Je¿eli nie zosta³ podany adres, \fIstunnel\fR domy¶lnie ³±czy siê
z lokalnym serwerem.
.IP "\fBdelay\fR = yes | no" 4
.IX Item "delay = yes | no"
opó¼nij rozwiniêcie adresu \s-1DNS\s0 podanego w opcji \fIconnect\fR
.IP "\fBexec\fR = ¶cie¿ka_do_programu (tylko Unix)" 4
.IX Item "exec = ¶cie¿ka_do_programu (tylko Unix)"
wykonaj lokalny program przystosowany do pracy z superdemonem inetd
.ie n .IP "\fBexecargs\fR = $0\fR \f(CW$1\fR \f(CW$2 ... (tylko Unix)" 4
.el .IP "\fBexecargs\fR = \f(CW$0\fR \f(CW$1\fR \f(CW$2\fR ... (tylko Unix)" 4
.IX Item "execargs = $0 $1 $2 ... (tylko Unix)"
argumenty do opcji \fIexec\fR w³±cznie z nazw± programu ($0)
.Sp
Cytowanie nie jest wspierane w obecnej wersji programu.
Argumenty s± rozdzielone dowoln± liczb± bia³ych znaków.
.IP "\fBident\fR = nazwa_u¿ytkownika" 4
.IX Item "ident = nazwa_u¿ytkownika"
weryfikuj nazwê zdalnego u¿ytkownika korzystaj±c z proto³u \s-1IDENT\s0 (\s-1RFC\s0 1413)
.IP "\fBlocal\fR = serwer" 4
.IX Item "local = serwer"
\&\s-1IP\s0 ¼ród³a do nawi±zywania zdalnych po³±czeñ
.Sp
Domy¶lnie u¿ywane jest \s-1IP\s0 najbardziej zewnêtrznego interfejsu w stronê
serwera, do którego nawi±zywane jest po³±czenie.
.IP "\fBprotocol\fR = protokó³" 4
.IX Item "protocol = protokó³"
negocjuj \s-1SSL\s0 podanym protoko³em aplikacyjnym
.Sp
aktualnie wspierane protoko³y: cifs, nntp, pop3, smtp
.IP "\fBpty\fR = yes | no (tylko Unix)" 4
.IX Item "pty = yes | no (tylko Unix)"
alokuj pseudoterminal dla programu uruchamianego w opcji 'exec'
.IP "\fBTIMEOUTbusy\fR = liczba_sekund" 4
.IX Item "TIMEOUTbusy = liczba_sekund"
czas oczekiwania na spodziewane dane
.IP "\fBTIMEOUTclose\fR = liczba_sekund" 4
.IX Item "TIMEOUTclose = liczba_sekund"
czas oczekiwania na close_notify (ustaw na 0, je¿eli klientem jest \s-1MSIE\s0)
.IP "\fBTIMEOUTidle\fR = liczba_sekund" 4
.IX Item "TIMEOUTidle = liczba_sekund"
maksymalny czas utrzymywania bezczynnego po³±czenia
.IP "\fBtransparent\fR = yes | no (tylko Unix)" 4
.IX Item "transparent = yes | no (tylko Unix)"
tryb przezroczystego proxy
.Sp
Przepisz adres, aby nawi±zywane po³±czenie wydawa³o siê pochodziæ
z bezpo¶rednio od klienta, a nie od programu \fIstunnel\fR.
Opcja dzia³a tylko w trybie lokalnym (opcja \fIexec\fR) przez za³adowanie
przy pomocy \s-1LD_PRELOAD\s0 biblioteki env.so, albo w trybie zdalnym (opcja
\&\fIconnect\fR) na systemie Linux 2.2 z w³±czon± opcj± \fItransparent proxy\fR.
.SH "ZWRACANA WARTO¦Æ"
.IX Header "ZWRACANA WARTO¦Æ"
\&\fBstunnel\fR zwraca zero w przypadku sukcesu, lub warto¶æ niezerow±
w przypadku b³êdu.
.SH "PRZYK£ADY"
.IX Header "PRZYK£ADY"
Szyfrowanie po³±czeñ do lokalnego serwera \fIimapd\fR mo¿na u¿yæ:
.PP
.Vb 4
\&    [imapd]
\&    accept = 993
\&    exec = /usr/sbin/imapd
\&    execargs = imapd
.Ve
albo w trybie zdalnym:
.PP
.Vb 3
\&    [imapd]
\&    accept = 993
\&    connect = 143
.Ve
W po³±czeniu z programem \fIpppd\fR \fBstunnel\fR pozwala zestawiæ prosty \s-1VPN\s0.
Po stronie sewera nas³uchuj±cego na porcie 2020 jego konfiguracja
mo¿e wygl±daæ nastêpuj±co:
.PP
.Vb 5
\&    [vpn]
\&    accept = 2020
\&    exec = /usr/sbin/pppd
\&    execargs = pppd local
\&    pty = yes
.Ve
Poni¿szy plik konfiguracyjny mo¿eby byæ wykorzystany do uruchomienia
programu \fBstunnel\fR w trybie \fIinetd\fR.  Warto zauwa¿yæ, ¿e w pliku
konfiguracyjnym nie ma sekcji \fI[nazwa_us³ugi]\fR.
.PP
.Vb 2
\&    exec = /usr/sbin/imapd
\&    execargs = imapd
.Ve
.SH "PLIKI"
.IX Header "PLIKI"
.IP "\fIstunnel.conf\fR" 4
.IX Item "stunnel.conf"
plik konfiguracyjny programu
.IP "\fIstunnel.pem\fR" 4
.IX Item "stunnel.pem"
certyfikat i klucz prywatny
.SH "B£ÊDY"
.IX Header "B£ÊDY"
Opcja \fIexecargs\fR nie obs³uguje cytowania.
.SH "OGRANICZENIA"
.IX Header "OGRANICZENIA"
\&\fIstunnel\fR nie mo¿e byæ u¿ywany do szyfrowania protoko³u \fI\s-1FTP\s0\fR,
poniewa¿ do przesy³ania poszczególnych plików u¿ywa on dodatkowych
po³±czeñ na otwieranych na dynamicznie przydzielanych portach.
Istniej± jednak specjalne wersje klientów i serwerów \s-1FTP\s0 pozwalaj±ce
na szyfrowanie przesy³anych danych przy pomocy protoko³u \fI\s-1SSL\s0\fR.
.SH "NOTKI"
.IX Header "NOTKI"
.Sh "\s-1TRYB\s0 \s-1INETD\s0 (tylko Unix)"
.IX Subsection "TRYB INETD (tylko Unix)"
W wiêkszo¶ci zastosowañ \fBstunnel\fR samodzielnie nas³uchuje na porcie
podanym w pliku konfiguracyjnym i tworzy po³±czenie z innym portem
podanym w opcji \fIconnect\fR lub nowym programem podanym w opcji \fIexec\fR.
Niektórzy wol± jednak wykorzystywaæ oddzielny program, który odbiera
po³±czenia, po czym uruchamia program \fBstunnel\fR.  Przyk³adami takich
programów s± inetd, xinetd i tcpserver.
.PP
Przyk³adowa linia pliku /etc/inetd.conf mo¿e wygl±daæ tak:
.PP
.Vb 2
\&    imaps stream tcp nowait root /usr/sbin/stunnel
\&        stunnel /etc/stunnel/imaps.conf
.Ve
Poniewa¿ w takich przypadkach po³±czenie na zdefiniowanym porcie
(tutaj \fIimaps\fR) nawi±zuje osobny program (tutaj \fIinetd\fR), \fBstunnel\fR
nie mo¿e mieæ u¿ywaæ opcji \fIaccept\fR.  W pliku konfiguracyjnym nie mo¿e
byæ równie¿ zdefiniowana ¿adna us³uga (\fI[nazwa_us³ugi]\fR), poniewa¿
konfiguracja taka pozwala na nawi±zanie tylko jednego po³±czenia.
Wszystkie \fI\s-1OPCJE\s0 US£UG\fR powinny byæ umieszczone razem z opcjami
globalnymi.  Przyk³ad takiej konfiguracji znajduje siê w sekcji
\&\fIPRZYK£ADY\fR.
.Sh "\s-1CERTYFIKATY\s0"
.IX Subsection "CERTYFIKATY"
Protokó³ \s-1SSL\s0 wymaga, aby ka¿dy serwer przedstawia³ siê nawi±zuj±cemu
po³±czenie klientowi prawid³owym certyfikatem X.509.  Do potwierdzenia
to¿samo¶ci w³a¶ciciela certyfikatu serwer musi mieæ odpowiadaj±cy mu
klucz prywatny.  Najprostsz± metod± uzyskania certyfikatu jest wygenerowanie
go przy pomocy wolnego pakietu \fIOpenSSL\fR.  Wiêcej informacji na temat
generowania certyfikatów mo¿na znale¼æ na umieszczonych poni¿ej stronach.
.PP
Przy generowaniu par certyfikat-klucz dla programu \fBstunnel\fR istotne
s± dwie kwestie.  Po pierwsze klucz prywatny nie mo¿e byæ zaszyfrowany,
poniewa¿ startuj±cy serwer nie ma w ogólnym przypadku mo¿liwo¶ci
uzyskania has³a od u¿ytkownika.  Do wytworzenia niezaszyfrowanego
klucza nale¿y przy uruchamianiu komendy \fIopenssl req\fR
podaæ jej parametr \fI\-nodes\fR.
.PP
Drug± istotn± kwesti± jest kolejno¶æ zawarto¶ci pliku \fI.pem\fR.
W pierwszej kolejno¶ci powinien on zawieraæ klucz prywatny,
a dopiero za nim podpisany certyfikat (nie ¿±danie certyfikatu).
Po certyfikacie i kluczu prywatnym powinny znajdowaæ siê puste linie.
Je¿eli przed certyfikatem znajduj± siê dodatkowe informacje tekstowe,
to powinny one zostaæ usuniête.  Otrzymany plik powinien mieæ
nastêpuj±c± postaæ:
.PP
.Vb 8
\&    -----BEGIN RSA PRIVATE KEY-----
\&    [zakodowany klucz]
\&    -----END RSA PRIVATE KEY-----
\&    [pusta linia]
\&    -----BEGIN CERTIFICATE-----
\&    [zakodowany certyfikat]
\&    -----END CERTIFICATE-----
\&    [pusta linia]
.Ve
.Sh "LOSOWO¦Æ"
.IX Subsection "LOSOWO¦Æ"
\&\fBstunnel\fR potrzebuje zainicjowaæ \s-1PRNG\s0 (generator liczb pseudolosowych),
gdy¿ protokó³ \s-1SSL\s0 wymaga do bezpieczeñstwa kryptograficznego ¼ród³a
dobrej losowo¶ci.  Nastêpuj±ce ¼ród³a s± kolejno odczytywane a¿ do
uzyskania  wystarczaj±cej ilo¶ci entropii:
.IP "\(bu" 4
Zawarto¶æ pliku podanego w opcji \fIRNDfile\fR.
.IP "\(bu" 4
Zawarto¶æ pliku o nazwie okre¶lonej przez zmienn± ¶rodowiskow±
\&\s-1RANDFILE\s0, o ile jest ona ustawiona.
.IP "\(bu" 4
Plik .rnd umieszczony w katalogu domowym u¿ytkownika,
je¿eli zmienna \s-1RANDFILE\s0 nie jest ustawiona.
.IP "\(bu" 4
Plik podany w opcji '\-\-with\-random' w czasie konfiguracji programu.
.IP "\(bu" 4
Zawarto¶æ ekranu w systemie Windows.
.IP "\(bu" 4
Gniazdo egd, je¿eli u¿yta zosta³a opcja \fI\s-1EGD\s0\fR.
.IP "\(bu" 4
Gniazdo egd podane w opcji '\-\-with\-egd\-socket' w czasie konfiguracji programu.
.IP "\(bu" 4
Urz±dzenie /dev/urandom.
.PP
Wspó³czesne (>=0.9.5a) wersje biblioteki \fIOpenSSL\fR automatycznie
zaprzestaj± ³adowania kolejnych danych w momencie uzyskania wystarczaj±cej
ilo¶ci entropii.  Wcze¶niejsze wersje biblioteki wykorzystaj± wszystkie
powy¿sze ¼ród³a, gdy¿ nie istnieje tam funkcja pozwalaj±ca okre¶liæ,
czy uzyskano ju¿ wystarczaj±co du¿o danych.
.PP
Warto zwróciæ uwagê, ¿e na maszynach z systemem Windows, na których
konsoli nie pracuje u¿ytkownik, zawarto¶æ ekranu nie jest wystarczaj±co
zmienna, aby zainicjowaæ \s-1PRNG\s0.  W takim przypadku do zainicjowania
generatora nale¿y u¿yæ opcji \fIRNDfile\fR.
.PP
Plik \fIRNDfile\fR powinien zawieraæ dane losowe \*(-- równie¿ w tym sensie,
¿e powinny byæ one inne przy ka¿dym uruchomieniu programu \fBstunnel\fR.
O ile nie u¿yta zosta³a opcja \fIRNDoverwrite\fR jest to robione
automatycznie.  Do rêcznego uzyskania takiego pliku u¿yteczna
mo¿e byæ komenda \fIopenssl rand\fR dostarczana ze wspó³czesnymi
wersjami pakietu \fIOpenSSL\fR.
.PP
Jeszcze jedna istotna informacja \*(-- je¿eli dostêpne jest urz±dzenie
\&\fI/dev/urandom\fR biblioteka \fIOpenSSL\fR ma zwyczaj zasilania nim \s-1PRNG\s0 w trakcie
sprawdzania stanu generatora.  W systemach z \fI/dev/urandom\fR urz±dzenie
to bêdzie najprawdopodobniej u¿yte, pomimo ¿e znajduje siê na samym koñcu
powy¿szej listy.  Jest to w³a¶ciwo¶æ biblioteki \fIOpenSSL\fR, a nie programu
\&\fIstunnel\fR.
.SH "ZOBACZ RÓWNIE¯"
.IX Header "ZOBACZ RÓWNIE¯"
.IP "\fItcpd\fR\|(8)" 4
.IX Item "tcpd"
biblioteka kontroli dostêpu do us³ug internetowych
.IP "\fIinetd\fR\|(8)" 4
.IX Item "inetd"
super-serwer internetowy
.IP "\fIhttp://stunnel.mirt.net/\fR" 4
.IX Item "http://stunnel.mirt.net/"
strona domowa programu \fIstunnel\fR
.IP "\fIhttp://www.stunnel.org/\fR" 4
.IX Item "http://www.stunnel.org/"
najczê¶ciej zadawane pytania na temat programu \fIstunnel\fR
.IP "\fIhttp://www.openssl.org/\fR" 4
.IX Item "http://www.openssl.org/"
strona projektu \fIOpenSSL\fR
.SH "AUTOR"
.IX Header "AUTOR"
.IP "Micha³ Trojnara" 4
.IX Item "Micha³ Trojnara"
<\fIMichal.Trojnara@mirt.net\fR>
