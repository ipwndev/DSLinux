
# set defaults
[ -e /etc/rc.defaults ] && . /etc/rc.defaults

# include overrides
if [ -e /etc/rc.conf ]
then
	. /etc/rc.conf
else
	echo "/etc/rc.conf does not exist on your system - see /etc/rc.defaults"
fi

PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin
export PATH

# setup networking
if [ "$enable_network_on_boot" = "YES" ]
then
	if /etc/rc.d/network start
	then
		__network_up="YES"
	else
		__network_up="NO"
	fi
else
	echo "Not configuring network:"
	echo "enable_network_on_boot is set to \"$enable_network_on_boot\""
	__network_up="NO"
fi

# start telnetd if configured
if [ "$start_telnetd" = "YES" ]
then
	if [ "$__network_up" = "YES" ]
	then
		/etc/rc.d/telnetd start
	else
		echo "Not starting telnetd: network is down"
	fi
fi

# set hostname
hostname $hostname

# set up /etc/hosts so networking tools will work
echo "127.0.0.1 $hostname" > /etc/hosts

# show firmware version if configured
[ "$show_firmware_version" = "YES" ] && fwver

# run local startup script if it exists
[ -e /etc/rc.local ] && . /etc/rc.local

# setup nano-X
if [ "$start_nanox" = "YES" ]
then
	fbset -depth 16 -n
	ifconfig lo up
fi

# this is here so that we will get a login prompt in any case
exit 0
